<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Bicyclus</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <script src="js/jquery/dist/jquery.js"></script>
        <script src="js/d3/d3.js"></script>
        <script src="http://dali.cs.kuleuven.be:8080/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/controller.js"></script>
        <script src="js/connection.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        <script src="js/charts.js"></script>
        <script src="js/trips.js"></script>

        <!--Google maps integratie-->

        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <title>Showing elevation along a path</title>
        <style>
            html, body, #map-canvas {
                height: 100%;
                margin: 0px;
                padding: 0px
            }
        </style>
        <script src="https://www.google.com/jsapi"></script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
        <script>
            var elevator;
            var map;
            var chart;
            var polyline;

            // The following path marks a general path from Mt.
            // Whitney, the highest point in the continental United
            // States to Badwater, Death Valley, the lowest point.
            var kotmichiel = new google.maps.LatLng(50.869775, 4.708674);
            var huisevert = new google.maps.LatLng(50.860603, 4.702528);
            var campus = new google.maps.LatLng(50.864700, 4.679541);
            var delhaize = new google.maps.LatLng(50.868543, 4.696412);
            var oudemarkt = new google.maps.LatLng(50.878286, 4.699466);
//            var whitney = new google.maps.LatLng(36.578581, -118.291994);
//            var lonepine = new google.maps.LatLng(36.606111, -118.062778);
//            var owenslake = new google.maps.LatLng(36.433269, -117.950916);
//            var beattyjunction = new google.maps.LatLng(36.588056, -116.943056);
//            var panamintsprings = new google.maps.LatLng(36.339722, -117.467778);
//            var badwater = new google.maps.LatLng(36.23998, -116.83171);
            // Load the Visualization API and the columnchart package.
            google.load('visualization', '1', {packages: ['columnchart']});

            function initialize() {
                var mapOptions = {
                    zoom: 14,
                    center: delhaize,
                    mapTypeId: 'terrain'
                }
                map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

                // Create an ElevationService.
                elevator = new google.maps.ElevationService();

                // Draw the path, using the Visualization API and the Elevation service.
                drawPath();
            }

            function drawPath() {

                // Create a new chart in the elevation_chart DIV.
                chart = new google.visualization.ColumnChart(document.getElementById('elevation_chart'));


                var path = [ kotmichiel, huisevert, campus, delhaize, kotmichiel];
//                var path = [ whitney, lonepine, owenslake, panamintsprings, beattyjunction, badwater];
                // Create a PathElevationRequest object using this array.
                // Ask for 256 samples along that path.
                var pathRequest = {
                    'path': path,
                    'samples': 256
                }

                // Initiate the path request.
                elevator.getElevationAlongPath(pathRequest, plotElevation);
            }

            // Takes an array of ElevationResult objects, draws the path on the map
            // and plots the elevation profile on a Visualization API ColumnChart.
            function plotElevation(results, status) {
                if (status != google.maps.ElevationStatus.OK) {
                    return;
                }
                var elevations = results;

                // Extract the elevation samples from the returned results
                // and store them in an array of LatLngs.
                var elevationPath = [];
                for (var i = 0; i < results.length; i++) {
                    elevationPath.push(elevations[i].location);
                }

                // Display a polyline of the elevation path.
                var pathOptions = {
                    path: elevationPath,
                    strokeColor: '#0000CC',
                    opacity: 0.4,
                    map: map
                }
                polyline = new google.maps.Polyline(pathOptions);

                // Extract the data from which to populate the chart.
                // Because the samples are equidistant, the 'Sample'
                // column here does double duty as distance along the
                // X axis.
                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Sample');
                data.addColumn('number', 'Elevation');
                for (var i = 0; i < results.length; i++) {
                    data.addRow(['', elevations[i].elevation]);
                }

                // Draw the chart using the data within its DIV.
                document.getElementById('elevation_chart').style.display = 'block';
                chart.draw(data, {
                    height: 150,
                    legend: 'none',
                    titleY: 'Elevation (m)'
                });
            }

            google.maps.event.addDomListener(window, 'load', initialize);

        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div class="container">
            <div class="jumbotron">
                <h1>Bicyclus Web interface v0.3</h1>
                <p>PenO.3 – KULeuven – Faculty of Engineering</p>
                <p><a class="btn btn-primary btn-lg" href="http://bicyclus.wordpress.com" target="_blank">Our Blog</a></p>
            </div>
            <!--<button id='connect'>Connect to server</button>-->
            <!--<button id='startTrip'>Start biketrip</button>-->
            <!--<button id='sendTestData'>Send sensordata to Server</button>-->
            <!--<button id='endTrip'>End this bike trip</button>-->
            <!--<button id='queryAll'>Query all bike trips</button>-->
            <!--<button id='clearMessages'>Clear server messages</button><br>-->
            <button id='getTrips' class="btn btn-primary">Get all trips</button>
            <button id='showJSON' class="btn btn-default">Show/Hide JSON</button>

            <p><div id='chart_div'></div></p>
            <p><div id='accel_div'></div></p>
            <p><div id='myReciever'></div></p>
            <p><ul id='receiver'></ul></p>




           <!--Google maps elevation chart -->
            <div id="map-canvas" style="height:250px;"></div>
            <div id="elevation_chart"></div>



        </div>
    </body>
</html>
